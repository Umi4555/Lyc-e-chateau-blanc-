<html>
<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #FF6B6B;
      --secondary: #4ECDC4;
      --dark: #2C3E50;
      --light: #F7F9FC;
      --accent: #FFD93D;
      --gradient-start: #FF8B8B;
      --gradient-end: #FF6B6B;
      --text-primary: #2C3E50;
      --text-secondary: #616E7C;
      --shadow-color: rgba(255, 107, 107, 0.2);
    }

    body {
      margin: 0;
      font-family: 'Poppins', system-ui, sans-serif;
      background: linear-gradient(135deg, #F7F9FC 0%, #ECF0F4 100%);
      min-height: 100vh;
      color: var(--text-primary);
    }

    .login-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(44, 62, 80, 0.95);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(8px);
    }

    .login-box {
      background: linear-gradient(145deg, #FFFFFF, #F7F9FC);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      text-align: center;
      max-width: 400px;
      width: 90%;
      border: 2px solid rgba(255, 107, 107, 0.1);
    }

    .login-box h2 {
      color: var(--dark);
      margin-bottom: 30px;
      font-size: 1.8em;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    }

    .login-box input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 2px solid #FF8B8B;
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }

    .login-box input:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 15px rgba(255, 107, 107, 0.15);
      transform: translateY(-2px);
    }

    .login-box button {
      background: linear-gradient(45deg, #FF6B6B, #FF8B8B);
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      margin: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px var(--shadow-color);
    }

    .login-box .skip-btn {
      background: linear-gradient(45deg, #4ECDC4, #6EE7E0);
    }

    .menu-interface {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .menu-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(247, 249, 252, 0.95));
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .menu-header h1 {
      font-size: 2.8em;
      margin: 0;
      background: linear-gradient(45deg, #2C3E50, #FF6B6B);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .lcd-screen {
      background: linear-gradient(45deg, #2C3E50, #34495E);
      color: #F7F9FC;
      font-family: 'Poppins', monospace;
      padding: 25px;
      border-radius: 20px;
      margin: 20px 0;
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 
        inset 0 0 30px rgba(0, 0, 0, 0.5),
        0 10px 30px rgba(0, 0, 0, 0.15);
      border: 3px solid #FF6B6B;
      font-size: 1.2em;
      text-shadow: 0 0 8px rgba(247, 249, 252, 0.6);
      text-align: center;
      line-height: 1.6;
    }

    .day-menu {
      background: linear-gradient(145deg, #FFFFFF, #F7F9FC);
      border-radius: 20px;
      padding: 30px;
      margin: 20px 0;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
      border: 2px solid rgba(255, 107, 107, 0.1);
    }

    .day-navigation {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 25px;
      margin-bottom: 30px;
    }

    .nav-btn {
      background: linear-gradient(45deg, #FF6B6B, #FF8B8B);
      border: none;
      color: white;
      padding: 12px 25px;
      border-radius: 30px;
      font-size: 1.1em;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      box-shadow: 0 4px 15px var(--shadow-color);
    }

    .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
    }

    .dish-item {
      background: linear-gradient(145deg, #FFFFFF, #F7F9FC);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 107, 107, 0.1);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
    }

    .dish-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      border-color: var(--primary);
    }

    .dish-item .dish-name {
      color: var(--text-primary);
      font-size: 1.1em;
      font-weight: 600;
    }

    .dish-item .dish-type {
      color: var(--primary);
      font-size: 0.9em;
      margin-top: 5px;
    }

    .dish-icon {
      background: linear-gradient(45deg, var(--light), #ECF0F4);
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 0.8em;
      color: var(--dark);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .menu-stats {
      display: none;
    }

    .rating {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #eee;
    }

    .rating-title {
      text-align: center;
      color: var(--dark);
      margin-bottom: 15px;
    }

    .star {
      font-size: 32px;
      cursor: pointer;
      color: #FFD93D;
      transition: 0.3s;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .star:hover {
      transform: scale(1.2) rotate(5deg);
      color: #FFD93D;
    }

    .fullscreen-message {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(44, 62, 80, 0.95);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      animation: slideUpFullscreen 1s ease-in-out forwards;
      color: white;
      font-size: 20px;
      text-align: center;
      line-height: 1.8;
      padding: 20px;
      box-sizing: border-box;
    }

    @keyframes slideUpFullscreen {
      0% {
        transform: translateY(100%);
        opacity: 0;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .return-btn {
      margin-top: 20px;
      padding: 12px 24px;
      background: #FF6B6B;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .submit-all-btn {
      background: #FF6B6B;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.2s;
      margin-top: 15px;
      display: block;
      margin: 15px auto;
    }

    .submit-all-btn:hover {
      transform: scale(1.05);
    }

    .login-button {
      position: fixed;
      top: 10px;
      right: 10px;
      background: linear-gradient(45deg, #FF6B6B, #FF8B8B);
      color: white;
      padding: 6px 12px;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      font-size: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      display: none;
      opacity: 1;
    }

    .login-button.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .login-button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .quiz-overlay,
    .quiz-container,
    .quiz-title,
    .quiz-question,
    .quiz-options,
    .quiz-btn,
    .quiz-feedback,
    .next-question-btn,
    .quiz-progress,
    .final-score {
      display: none;
    }

    .menu-footer {
      text-align: center;
      margin: 40px 0;
      padding: 30px;
      background: linear-gradient(145deg, #FFFFFF, #F7F9FC);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
      border: 2px solid rgba(255, 107, 107, 0.1);
    }

    .menu-footer .commitment {
      font-size: 1.2em;
      color: var(--dark);
      margin-bottom: 20px;
      font-weight: 500;
      letter-spacing: 0.5px;
      line-height: 1.6;
    }

    .menu-footer .sustainability {
      font-size: 1.1em;
      color: var(--text-secondary);
      margin-bottom: 15px;
      font-style: italic;
      letter-spacing: 0.3px;
    }

    .menu-footer .disclaimer {
      font-size: 0.9em;
      color: var(--text-secondary);
      opacity: 0.8;
      font-style: italic;
      margin-top: 20px;
      letter-spacing: 0.2px;
    }
  </style>
</head>
<body>
  <div class="login-overlay" id="loginOverlay">
    <div class="login-box">
      <h2>Bienvenue sur le Menu de la Cantine</h2>
      <p>Pour que votre avis soit pris en compte, veuillez vous identifier.</p>
      <form id="loginForm">
        <input type="text" placeholder="Prénom" id="firstName" required>
        <input type="text" placeholder="Nom" id="lastName" required>
        <button type="submit">Se connecter</button>
        <button type="button" class="skip-btn" onclick="skipLogin()">Continuer en anonyme</button>
      </form>
    </div>
  </div>

  <div class="menu-interface">
    <div class="menu-header">
      <h1>Menu de la Cantine</h1>
    </div>
    
    <div class="lcd-screen">
      Bienvenue ! Découvrez notre menu de la semaine
    </div>

    <div class="hint-text">
      Sélectionnez un plat pour voir sa composition et les informations nutritionnelles
    </div>

    <div class="day-menu">
      <div class="day-navigation">
        <button class="nav-btn" onclick="changeDay(-1)">&#x2190;</button>
        <div class="current-day" id="current-day">Lundi 15 janvier</div>
        <button class="nav-btn" onclick="changeDay(1)">&#x2192;</button>
      </div>
      
      <div id="menu-items"></div>

      <div class="rating-title">Donnez votre avis</div>
      <div class="rating">
        <span class="star" onclick="rate(1)">&#x2605;</span>
        <span class="star" onclick="rate(2)">&#x2605;</span>
        <span class="star" onclick="rate(3)">&#x2605;</span>
        <span class="star" onclick="rate(4)">&#x2605;</span>
        <span class="star" onclick="rate(5)">&#x2605;</span>
      </div>
    </div>

    <div class="menu-footer">
      <p class="commitment">✦ Nous privilégions les produits locaux et de saison pour une cuisine authentique ✦</p>
      <p class="sustainability">Notre engagement quotidien pour une cuisine durable et responsable</p>
      <p class="disclaimer">Menu susceptible de modifications selon les approvisionnements</p>
    </div>
  </div>

  <button class="login-button" id="loginButton">Se connecter</button>

  <script>
    let userIdentity = null;
    function handleLogin(event) {
      if (event) event.preventDefault();
      const firstName = document.getElementById('firstName').value;
      const lastName = document.getElementById('lastName').value;
      if (firstName && lastName) {
        userIdentity = {
          firstName,
          lastName
        };
      }
      document.getElementById('loginOverlay').style.display = 'none';
      document.getElementById('loginButton').style.display = 'none';
    }
    function skipLogin() {
      userIdentity = null;
      document.getElementById('loginOverlay').style.display = 'none';
      document.getElementById('loginButton').style.display = 'block';
    }
    const weeklyMenu = {
      'Lundi 15 janvier': [{
        name: 'Betterave-mimosa / Cordon bleu / Spaghetti bio',
        ingredients: 'Betterave-mimosa, salade verte, pomelos, salad\'bar, cordon bleu, poisson meunière',
        nutritionalInfo: 'Spaghetti bio, brocolis bio LAB, fromage / yaourt bio A, kiwi',
        type: 'Menu du Jour',
        icons: ['Bio', 'Local']
      }],
      'Mardi 16 janvier': [{
        name: 'Rosette beurre / Sauté de porc / Salsifis',
        ingredients: 'Rosette beurre, salade verte, pomelos, salad bar, sauté de porc, aile de raie',
        nutritionalInfo: 'Salsifis, semoule bio, fromage / yaourt bio, dessert bar',
        type: 'Menu du Jour',
        icons: ['Bio', 'Local']
      }],
      'Mercredi 17 janvier': [{
        name: 'Œuf mayonnaise / Saucisse de toulouse / Lentilles bio',
        ingredients: 'Œuf mayonnaise, salade verte, pomelos, saucisse de toulouse, filet de colin',
        nutritionalInfo: 'Lentilles bio, côte de blettes, fromage / yaourt bio, pêche melba',
        type: 'Menu du Jour',
        icons: ['Bio', 'Local']
      }],
      'Jeudi 18 janvier': [{
        name: 'Salade coleslaw / Wings de poulet / Haricots beurre',
        ingredients: 'Salade coleslaw, salade verte, pomelos, salad bar, wings de poulet, nuggets végétal',
        nutritionalInfo: 'Haricots beurre, frites, fromage / yaourt bio, orange',
        type: 'Menu du Jour',
        icons: ['Bio', 'Local']
      }],
      'Vendredi 19 janvier': [{
        name: 'Salade de blé bio / Paupiette de veau / Riz bio',
        ingredients: 'Salade de blé bio AB, salade verte, pomelos, salad bar, paupiette de veau, médaillon de merlu',
        nutritionalInfo: 'Riz bio, légumes verts bio, fromage / yaourt bio AB, pâtisserie',
        type: 'Menu du Jour',
        icons: ['Bio', 'Local']
      }]
    };

    let currentDay = 'Lundi 15 janvier';

    function updateMenuDisplay() {
      const dayMenu = weeklyMenu[currentDay];
      const menuItemsContainer = document.getElementById('menu-items');
      document.getElementById('current-day').textContent = currentDay;
      
      let menuHTML = '';
      dayMenu.forEach(dish => {
        const escapedIngredients = dish.ingredients.replace(/'/g, "\\'");
        const escapedNutrition = dish.nutritionalInfo.replace(/'/g, "\\'");
        
        menuHTML += `
          <div class="dish-item" onclick="showDishDetails('${escapedIngredients}', '${escapedNutrition}')">
            <div class="dish-name">${dish.name}</div>
            <div class="dish-type">${dish.type}</div>
            <div class="dish-icons">
              ${dish.icons.map(icon => `<span class="dish-icon">${icon}</span>`).join('')}
            </div>
          </div>
        `;
      });
      
      menuItemsContainer.innerHTML = menuHTML;
    }

    function changeDay(direction) {
      const days = Object.keys(weeklyMenu);
      let currentIndex = days.indexOf(currentDay);
      let newIndex = currentIndex + direction;
      if (newIndex < 0 || newIndex >= days.length) {
        return;
      }
      currentDay = days[newIndex];
      updateMenuDisplay();
      document.querySelector('.lcd-screen').textContent = `Menu du ${currentDay}`;
    }
    function showDishDetails(ingredients, nutrition) {
      document.querySelector('.lcd-screen').innerHTML = `
        Ingrédients: ${ingredients}<br><br>
        ${nutrition}
      `;
    }
    function rate(stars) {
      const currentDish = weeklyMenu[currentDay][0].name;
      if (userIdentity) {
        if (currentDay === 'Vendredi 19 janvier') {
          document.querySelector('.lcd-screen').innerHTML = `
            <div class="scroll-message">
              Merci ${userIdentity.firstName} !<br>
              Vous avez donné ${stars} étoiles au repas.
              <button class="submit-all-btn" onclick="submitAllRatings()">Envoyer tous mes avis</button>
            </div>
          `;
        } else {
          document.querySelector('.lcd-screen').innerHTML = `
            <div class="scroll-message">
              Merci ${userIdentity.firstName} !<br>
              Vous avez donné ${stars} étoiles au repas.
            </div>
          `;
        }
      } else {
        document.querySelector('.lcd-screen').innerHTML = `
          <div class="scroll-message">
            Connectez-vous pour donner votre avis.<br>
            Votre opinion nous aide à nous améliorer !
          </div>
        `;
      }
    }
    function submitAllRatings() {
      const fullscreenMsg = document.createElement('div');
      fullscreenMsg.className = 'fullscreen-message';
      fullscreenMsg.innerHTML = `
        Merci beaucoup ${userIdentity.firstName} ${userIdentity.lastName} !
        <br><br>
        Vos avis ont été enregistrés.
        <br>
        Nous tiendrons compte de vos retours 
        <br>
        pour améliorer nos repas.
        <br><br>
        À très bientôt dans votre cantine !
        <button class="return-btn" onclick="location.reload()">Retour au menu</button>
      `;
      document.body.appendChild(fullscreenMsg);
    }
    let lastScrollPosition = 0;
    let ticking = false;
    window.addEventListener('scroll', function () {
      lastScrollPosition = window.scrollY;
      if (!ticking) {
        window.requestAnimationFrame(function () {
          const loginButton = document.getElementById('loginButton');
          if (lastScrollPosition > 50) {
            loginButton.classList.add('hidden');
          } else {
            loginButton.classList.remove('hidden');
          }
          ticking = false;
        });
        ticking = true;
      }
    });
    updateMenuDisplay();
    document.getElementById('loginForm').addEventListener('submit', handleLogin);
    document.getElementById('loginButton').addEventListener('click', function () {
      document.getElementById('loginOverlay').style.display = 'flex';
      document.getElementById('firstName').value = '';
      document.getElementById('lastName').value = '';
    });
  </script>
</body>
</html>